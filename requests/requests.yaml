_type: export
__export_format: 4
__export_date: 2025-10-25T00:00:00.000Z
__export_source: insomnia.desktop.app:v2023.5.8
resources:
  - _id: req_register_success
    parentId: fld_auth
    type: request
    name: 1. Cadastro bem-sucedido
    method: POST
    url: "{{ _.base_url }}/register"
    body:
      mimeType: application/json
      text: |
        {
          "name": "João Silva",
          "email": "joao.silva@email.com",
          "password": "senha123"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_register_duplicate_email
    parentId: fld_auth
    type: request
    name: 2. Cadastro - E-mail repetido
    method: POST
    url: "{{ _.base_url }}/register"
    body:
      mimeType: application/json
      text: |
        {
          "name": "Maria Santos",
          "email": "joao.silva@email.com",
          "password": "senha456"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_register_invalid_password
    parentId: fld_auth
    type: request
    name: 3. Cadastro - Senha inválida (muito curta)
    method: POST
    url: "{{ _.base_url }}/register"
    body:
      mimeType: application/json
      text: |
        {
          "name": "Pedro Costa",
          "email": "pedro.costa@email.com",
          "password": "123"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_register_invalid_email
    parentId: fld_auth
    type: request
    name: 4. Cadastro - E-mail inválido
    method: POST
    url: "{{ _.base_url }}/register"
    body:
      mimeType: application/json
      text: |
        {
          "name": "Ana Paula",
          "email": "email_invalido",
          "password": "senha123"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_register_malformed
    parentId: fld_auth
    type: request
    name: 5. Cadastro - Requisição mal formatada
    method: POST
    url: "{{ _.base_url }}/register"
    body:
      mimeType: application/json
      text: |
        {
          "name": 123,
          "email": true,
          "password": ["senha123"]
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_login_success
    parentId: fld_auth
    type: request
    name: 6. Login bem-sucedido
    method: POST
    url: "{{ _.base_url }}/login"
    body:
      mimeType: application/json
      text: |
        {
          "email": "joao.silva@email.com",
          "password": "senha123"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_login_invalid_password
    parentId: fld_auth
    type: request
    name: 7. Login - Senha inválida
    method: POST
    url: "{{ _.base_url }}/login"
    body:
      mimeType: application/json
      text: |
        {
          "email": "joao.silva@email.com",
          "password": "senhaErrada"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_login_invalid_email
    parentId: fld_auth
    type: request
    name: 8. Login - E-mail inválido
    method: POST
    url: "{{ _.base_url }}/login"
    body:
      mimeType: application/json
      text: |
        {
          "email": "email_invalido",
          "password": "senha123"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_login_malformed
    parentId: fld_auth
    type: request
    name: 9. Login - Requisição mal formatada
    method: POST
    url: "{{ _.base_url }}/login"
    body:
      mimeType: application/json
      text: |
        {
          "email": 12345,
          "password": null
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_protected_valid_token
    parentId: fld_protected
    type: request
    name: 10. Acesso /protected com token válido
    method: GET
    url: "{{ _.base_url }}/protected"
    headers:
      - name: Authorization
        value: "Bearer {{ _.token }}"
    description: |
      IMPORTANTE: Execute primeiro a requisição "6. Login bem-sucedido" 
      e copie o token retornado para a variável de ambiente "token"

  - _id: req_protected_no_token
    parentId: fld_protected
    type: request
    name: 11. Acesso /protected sem token
    method: GET
    url: "{{ _.base_url }}/protected"

  - _id: req_protected_invalid_token
    parentId: fld_protected
    type: request
    name: 12. Acesso /protected com token inválido
    method: GET
    url: "{{ _.base_url }}/protected"
    headers:
      - name: Authorization
        value: "Bearer token_invalido_123456"

  - _id: req_todos_create
    parentId: fld_todos
    type: request
    name: 13. Todos - Criar tarefa
    method: POST
    url: "{{ _.base_url }}/todos"
    body:
      mimeType: application/json
      text: |
        {
          "title": "Comprar leite",
          "description": "Integral, 1L",
          "priority": "high",
          "completed": false
        }
    headers:
      - name: Content-Type
        value: application/json
      - name: Authorization
        value: "Bearer {{ _.token }}"

  - _id: req_todos_list
    parentId: fld_todos
    type: request
    name: 14. Todos - Listar
    method: GET
    url: "{{ _.base_url }}/todos"
    headers:
      - name: Authorization
        value: "Bearer {{ _.token }}"

  - _id: req_todos_list_filtered
    parentId: fld_todos
    type: request
    name: 15. Todos - Listar filtrado
    method: GET
    url: "{{ _.base_url }}/todos?completed=false&priority=high&title=compra"
    headers:
      - name: Authorization
        value: "Bearer {{ _.token }}"

  - _id: req_todos_get_by_id
    parentId: fld_todos
    type: request
    name: 16. Todos - Buscar por ID
    method: GET
    url: "{{ _.base_url }}/todos/{{ _.todo_id }}"
    headers:
      - name: Authorization
        value: "Bearer {{ _.token }}"

  - _id: req_todos_put
    parentId: fld_todos
    type: request
    name: 17. Todos - Atualizar (PUT)
    method: PUT
    url: "{{ _.base_url }}/todos/{{ _.todo_id }}"
    body:
      mimeType: application/json
      text: |
        {
          "title": "Comprar pão e leite",
          "description": "Pão francês e leite sem lactose",
          "completed": true,
          "priority": "medium",
          "dueDate": null
        }
    headers:
      - name: Content-Type
        value: application/json
      - name: Authorization
        value: "Bearer {{ _.token }}"

  - _id: req_todos_patch
    parentId: fld_todos
    type: request
    name: 18. Todos - Atualizar (PATCH)
    method: PATCH
    url: "{{ _.base_url }}/todos/{{ _.todo_id }}"
    body:
      mimeType: application/json
      text: |
        {
          "completed": false
        }
    headers:
      - name: Content-Type
        value: application/json
      - name: Authorization
        value: "Bearer {{ _.token }}"

  - _id: req_todos_delete
    parentId: fld_todos
    type: request
    name: 19. Todos - Remover
    method: DELETE
    url: "{{ _.base_url }}/todos/{{ _.todo_id }}"
    headers:
      - name: Authorization
        value: "Bearer {{ _.token }}"

  # ===== Erros específicos de To-dos =====
  - _id: req_todos_create_no_token
    parentId: fld_todos
    type: request
    name: 20. Todos - Criar SEM token (401)
    method: POST
    url: "{{ _.base_url }}/todos"
    body:
      mimeType: application/json
      text: |
        {
          "title": "Tarefa sem token"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_todos_create_invalid_token
    parentId: fld_todos
    type: request
    name: 21. Todos - Criar com token INVÁLIDO (401)
    method: POST
    url: "{{ _.base_url }}/todos"
    body:
      mimeType: application/json
      text: |
        {
          "title": "Tarefa com token inválido"
        }
    headers:
      - name: Content-Type
        value: application/json
      - name: Authorization
        value: "Bearer token_invalido_123456"

  - _id: req_todos_list_no_token
    parentId: fld_todos
    type: request
    name: 22. Todos - Listar SEM token (401)
    method: GET
    url: "{{ _.base_url }}/todos"

  - _id: req_todos_get_other_user_forbidden
    parentId: fld_todos
    type: request
    name: 23. Todos - Acesso de OUTRO usuário (403)
    method: GET
    url: "{{ _.base_url }}/todos/{{ _.other_user_todo_id }}"
    headers:
      - name: Authorization
        value: "Bearer {{ _.token }}"
    description: |
      Simulação de acesso indevido: defina a variável "other_user_todo_id" com o ID
      de uma tarefa criada sob OUTRA conta/usuário (outro token). A resposta deve ser 403 Forbidden.

  - _id: req_todos_create_malformed
    parentId: fld_todos
    type: request
    name: 24. Todos - Criar MAL FORMATADO (400)
    method: POST
    url: "{{ _.base_url }}/todos"
    body:
      mimeType: application/json
      text: |
        {
          "title": 12345
        }
    headers:
      - name: Content-Type
        value: application/json
      - name: Authorization
        value: "Bearer {{ _.token }}"

  - _id: req_todos_put_malformed
    parentId: fld_todos
    type: request
    name: 25. Todos - PUT MAL FORMATADO (400)
    method: PUT
    url: "{{ _.base_url }}/todos/{{ _.todo_id }}"
    body:
      mimeType: application/json
      text: |
        {
          "title": 999,
          "completed": "sim",
          "priority": 42
        }
    headers:
      - name: Content-Type
        value: application/json
      - name: Authorization
        value: "Bearer {{ _.token }}"

  # Folders
  - _id: fld_auth
    type: request_group
    name: Autenticação
    description: Rotas públicas de registro e login

  - _id: fld_protected
    type: request_group
    name: Rotas Protegidas
    description: Rotas que requerem autenticação JWT

  - _id: fld_todos
    type: request_group
    name: To-dos
    description: CRUD completo de tarefas (protegido por JWT)

  # Environment
  - _id: env_base
    type: environment
    name: Base Environment
    data:
      base_url: http://localhost:3000
      token: ""
      todo_id: ""
      other_user_todo_id: ""

  - _id: env_production
    type: environment
    name: Production
    data:
      base_url: https://sua-api.vercel.app
      token: ""

  # Environment Vercel
  - _id: env_vercel
    type: environment
    name: Vercel Production
    data:
      base_url: https://sua-api.vercel.app/api
      token: ""
